#include<stdlib.h>
#include<stdio.h>
#include"thread.h"
#include"my_semaphore.h"

int sem_init (my_sem_t * my_sem, unsigned int value){
  static int id = 0;
  if(!my_sem)
    return -1;
  my_sem->id = id;
  id++;
  my_sem->val = value;
  return 0;
}

int my_sem_wait (my_sem_t * my_sem){
  if(!my_sem || my_sem->id == -1)
    return -1;
  while(my_sem->val == 0){
    thread_yield();
  }
  my_sem->val -- ;
  return 0;
}

int my_sem_post (my_sem_t * my_sem){
  if(!my_sem || my_sem->id == -1)
    return -1;
  my_sem->val++;
  return 0;
}
