#include <stdlib.h>
#include <stdio.h>
#include <assert.h>
#include <ucontext.h>
#include "threadStructure.h"

thread * newThread(thread_t tid, ucontext_t * uc){
  thread * t = (thread *)malloc(sizeof(thread)); 
  if(t){
    t->tid = tid;
    t->state = uc;
    return t;
  }
  return NULL;
}

thread_t getTidThread (thread* th){
  return th->tid;
}

ucontext_t* getThreadState(thread* th){
  return th->state;
}

void killThread(thread * th){
  assert(th);
  if(th->state) 
    free(th->state);
  free(th);
}
  
/*
 * generation du TID unique d'un thread
 */

thread_t getNextTID(){
  static thread_t TID = 0;
  return TID++;
}
