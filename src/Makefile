CC      = gcc
CFLAGS  =
LDFLAGS =

PROG  = ../bin/Threads

TEST = ../bin/Tests

OBJS  = threadStructure.o fifoThread.o thread.o 

all : $(PROG) $(TEST) chgContext performance destruction

threadStructure.o : threadStructure.c threadStructure.h
	gcc -c threadStructure.c 

fifoThread.o : fifoThread.c fifoThread.h threadStructure.h
	gcc -c fifoThread.c

thread.o : thread.c thread.h fifoThread.h threadStructure.h
	gcc -c thread.c

prog2_ex.o : prog2_ex.c thread.h
	gcc -c prog2_ex.c

test1.o : test1.c thread.h
	gcc -c test1.c

performance.o : performance.c 
	gcc -c performance.c

chgContext.o : chgContext.c
	gcc -c chgContext.c

destruction.o : destruction.c
	gcc -c destruction.c

chgContext : $(OBJS) chgContext.o
	 $(CC) $(CFLAGS) $(LDFLAGS) -lpthread $(OBJS) chgContext.o -o chgContext 

performance : $(OBJS) performance.o
	 $(CC) $(CFLAGS) $(LDFLAGS) -lpthread $(OBJS) performance.o -o performance

destruction : $(OBJS) destruction.o
	 $(CC) $(CFLAGS) $(LDFLAGS) -lpthread $(OBJS) destruction.o -o destruction  

$(PROG): $(OBJS) prog2_ex.o
	$(CC) $(CFLAGS) $(LDFLAGS) $(OBJS) prog2_ex.o -o $(PROG)

$(TEST): $(OBJS) test1.o
	$(CC) $(CFLAGS) $(LDFLAGS) $(OBJS) test1.o -o $(TEST)

clean :
	\rm -f $(PROG) $(TEST) chgContext performance destruction *.o *~ *#

run :
	../bin/Threads

check : 
	../bin/Tests