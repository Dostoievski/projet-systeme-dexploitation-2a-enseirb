DEBUG = no
CC = gcc
RACINE = ../..
LIBPATH = -L $(RACINE)/lib/
LIB = $(RACINE)/lib/libthread.a
BIN = $(RACINE)/bin/performance/
EXEC = $(BIN)creationAttente $(BIN)chgContext $(BIN)destruction $(BIN)freedMemory

ifeq ($(DEBUG),yes)
	CFLAGS = -W -Wall -g
else
	CFLAGS = 
endif

LDFLAGS = $(LIBPATH) -lthread -lpthread

all: $(EXEC)

ifeq ($(DEBUG),yes)
	@echo "Génération en mode debug"
else
	@echo "Génération en mode release"
endif

$(BIN)creationAttente: creationAttente.c $(LIB)
	@$(CC) -o $@ $^ $(LDFLAGS) $(CFLAGS)

$(BIN)chgContext: chgContext.c $(LIB)
	@$(CC) -o $@ $^ $(LDFLAGS) $(CFLAGS)

$(BIN)destruction: destruction.c $(LIB)
	@$(CC) -o $@ $^ $(LDFLAGS) $(CFLAGS)

$(BIN)freedMemory: freedMemory.c $(LIB)
	@$(CC) -o $@ $^ $(LDFLAGS) $(CFLAGS)

.PHONY: clean mrproper

clean:
	@rm *.o *~ *#

mrproper:
	@rm $(EXEC)