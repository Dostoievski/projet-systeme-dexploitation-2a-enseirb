DEBUG = no
CC=gcc
LIB = ../lib/libthread.a
ifeq ($(DEBUG),yes)
	CFLAGS = -W -Wall -g
else
	CFLAGS = 
endif
LDFLAGS = 
SRC= $(wildcard *.c)
OBJ= $(SRC:.c=.o)

all: $(LIB)

ifeq ($(DEBUG),yes)
	@echo "Génération en mode debug"
else
	@echo "Génération en mode release"
endif

$(LIB): $(OBJ)
	ar -rv $@ $^
	ranlib $@

thread.o: thread.h
priorite.o: priorite.h
fifoThread.o: fifoThread.h
threadStructure.o: threadStructure.h

%.o: %.c
	@$(CC) -o $@ -c $< $(CFLAGS)

.PHONY: clean

clean:
	@rm -f *.o *~ *#