P_PRIORITY = yes
CC=gcc
LIB = ../lib/libthread.a
ifeq ($(P_PRIORITY),yes)
	CFLAGS = -W -Wall -g -DP_PRIORITY
else
	CFLAGS = 
endif
LDFLAGS = 
SRC= $(wildcard *.c)
OBJ= $(SRC:.c=.o)

all: $(LIB)

ifeq ($(P_PRIORITY),yes)
	@echo "Politique d'ordonnancement: Thread de plus grande priorite"
else
	@echo "Politique d'ordonnancement: Thread 1er de la liste "
endif

$(LIB): $(OBJ)
	ar -rv $@ $^
	ranlib $@

thread.o: thread.h
priorite.o: priorite.h
fifoThread.o: fifoThread.h
my_semaphore.o: my_semaphore.h
threadStructure.o: threadStructure.h

%.o: %.c
	$(CC) -o $@ -c $< $(CFLAGS)

.PHONY: clean

clean:
	rm -f *.o *~ *#